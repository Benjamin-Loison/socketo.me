<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="generator" content="ApiGen 2.6.1" />

	<title>Class Ratchet\Server\FlashPolicy | Ratchet</title>

	<script type="text/javascript" src="resources/combined.js?144019575"></script>
	<script type="text/javascript" src="elementlist.js?1977260093"></script>
	<link rel="stylesheet" type="text/css" media="all" href="resources/style.css?1532301413" />

</head>

<body>
<div id="left">
	<div id="menu">
		<a href="index.html" title="Overview"><span>Overview</span></a>


		<div id="groups">
			<h3>Namespaces</h3>
			<ul>
				<li><a href="namespace-Evenement.html">Evenement</a>
						</li>
				<li><a href="namespace-Guzzle.html">Guzzle<span></span></a>
						<ul>
				<li><a href="namespace-Guzzle.Common.html">Common<span></span></a>
						<ul>
				<li><a href="namespace-Guzzle.Common.Cache.html">Cache</a>
						</li>
				<li><a href="namespace-Guzzle.Common.Exception.html">Exception</a>
						</li>
				<li><a href="namespace-Guzzle.Common.Log.html">Log</a>
						</li>
				<li><a href="namespace-Guzzle.Common.Validation.html">Validation</a>
						</li>
							</ul></li>
				<li><a href="namespace-Guzzle.Http.html">Http<span></span></a>
						<ul>
				<li><a href="namespace-Guzzle.Http.CookieJar.html">CookieJar</a>
						</li>
				<li><a href="namespace-Guzzle.Http.Curl.html">Curl</a>
						</li>
				<li><a href="namespace-Guzzle.Http.Exception.html">Exception</a>
						</li>
				<li><a href="namespace-Guzzle.Http.Message.html">Message</a>
						</li>
				<li><a href="namespace-Guzzle.Http.Plugin.html">Plugin</a>
						</li>
							</ul></li></ul></li>
				<li><a href="namespace-PHP.html">PHP</a>
						</li>
				<li class="active"><a href="namespace-Ratchet.html">Ratchet<span></span></a>
						<ul>
				<li class="active"><a href="namespace-Ratchet.Server.html">Server</a>
						</li>
				<li><a href="namespace-Ratchet.Session.html">Session<span></span></a>
						<ul>
				<li><a href="namespace-Ratchet.Session.Serialize.html">Serialize</a>
						</li>
				<li><a href="namespace-Ratchet.Session.Storage.html">Storage<span></span></a>
						<ul>
				<li><a href="namespace-Ratchet.Session.Storage.Proxy.html">Proxy</a>
						</li>
							</ul></li></ul></li>
				<li><a href="namespace-Ratchet.Wamp.html">Wamp</a>
						</li>
				<li><a href="namespace-Ratchet.WebSocket.html">WebSocket<span></span></a>
						<ul>
				<li><a href="namespace-Ratchet.WebSocket.Guzzle.html">Guzzle<span></span></a>
						<ul>
				<li><a href="namespace-Ratchet.WebSocket.Guzzle.Http.html">Http<span></span></a>
						<ul>
				<li><a href="namespace-Ratchet.WebSocket.Guzzle.Http.Message.html">Message</a>
						</li>
							</ul></li></ul></li>
				<li><a href="namespace-Ratchet.WebSocket.Version.html">Version<span></span></a>
						<ul>
				<li><a href="namespace-Ratchet.WebSocket.Version.Hixie76.html">Hixie76</a>
						</li>
				<li><a href="namespace-Ratchet.WebSocket.Version.RFC6455.html">RFC6455</a>
						</li>
							</ul></li></ul></li></ul></li>
				<li><a href="namespace-React.html">React<span></span></a>
						<ul>
				<li><a href="namespace-React.EventLoop.html">EventLoop<span></span></a>
						<ul>
				<li><a href="namespace-React.EventLoop.Timer.html">Timer</a>
						</li>
							</ul></li>
				<li><a href="namespace-React.Socket.html">Socket</a>
						</li>
				<li><a href="namespace-React.Stream.html">Stream</a>
						</li>
							</ul></li>
				<li><a href="namespace-Symfony.html">Symfony<span></span></a>
						<ul>
				<li><a href="namespace-Symfony.Component.html">Component<span></span></a>
						<ul>
				<li><a href="namespace-Symfony.Component.HttpFoundation.html">HttpFoundation<span></span></a>
						<ul>
				<li><a href="namespace-Symfony.Component.HttpFoundation.Session.html">Session<span></span></a>
						<ul>
				<li><a href="namespace-Symfony.Component.HttpFoundation.Session.Attribute.html">Attribute</a>
						</li>
				<li><a href="namespace-Symfony.Component.HttpFoundation.Session.Flash.html">Flash</a>
						</li>
				<li><a href="namespace-Symfony.Component.HttpFoundation.Session.Storage.html">Storage<span></span></a>
						<ul>
				<li><a href="namespace-Symfony.Component.HttpFoundation.Session.Storage.Handler.html">Handler</a>
						</li>
				<li><a href="namespace-Symfony.Component.HttpFoundation.Session.Storage.Proxy.html">Proxy</a>
						</li>
							</ul></li></ul></li></ul></li></ul></li></ul></li>
			</ul>
		</div>

		<hr />


		<div id="elements">
			<h3>Classes</h3>
			<ul>
				<li class="active"><a href="class-Ratchet.Server.FlashPolicy.html">FlashPolicy</a></li>
				<li><a href="class-Ratchet.Server.IoConnection.html">IoConnection</a></li>
				<li><a href="class-Ratchet.Server.IoServer.html">IoServer</a></li>
				<li><a href="class-Ratchet.Server.IpBlackList.html">IpBlackList</a></li>
			</ul>





		</div>
	</div>
</div>

<div id="splitter"></div>

<div id="right">
<div id="rightInner">
	<form id="search">
		<input type="hidden" name="cx" value="" />
		<input type="hidden" name="ie" value="UTF-8" />
		<input type="text" name="q" class="text" />
		<input type="submit" value="Search" />
	</form>

	<div id="navigation">
		<ul>
			<li>
				<a href="index.html" title="Overview"><span>Overview</span></a>
			</li>
			<li>
				<a href="namespace-Ratchet.Server.html" title="Summary of Ratchet\Server"><span>Namespace</span></a>
			</li>
			<li class="active">
<span>Class</span>			</li>
		</ul>
		<ul>
			<li>
				<a href="tree.html" title="Tree view of classes, interfaces, traits and exceptions"><span>Tree</span></a>
			</li>
		</ul>
		<ul>
		</ul>
	</div>

<div id="content" class="class">
	<h1>Class FlashPolicy</h1>


	<div class="description">
	
<p>An app to go on a server stack to pass a policy file to a Flash socket Useful
if you're using Flash as a WebSocket polyfill on IE Be sure to run your server
instance on port 843 By default this lets accepts everything, make sure you
tighten the rules up for production</p>

	</div>

	<dl class="tree">
		<dd style="padding-left:0px">
<b><span>Ratchet\Server\FlashPolicy</span></b>			
			 implements 
				<a href="class-Ratchet.MessageComponentInterface.html"><span>Ratchet\MessageComponentInterface</span></a>
			
			
		</dd>
	</dl>








	<div class="info">
		
		
		<b>Namespace:</b> <a href="namespace-Ratchet.html">Ratchet</a>\<a href="namespace-Ratchet.Server.html">Server</a><br />
		

				<b>Link:</b>
				<a href="http://www.adobe.com/devnet/articles/crossdomain_policy_file_spec.html">http://www.adobe.com/devnet/articles/crossdomain_policy_file_spec.html</a><br />
				<b>Link:</b>
				<a href="http://learn.adobe.com/wiki/download/attachments/64389123/CrossDomain_PolicyFile_Specification.pdf?version=1">http://learn.adobe.com/wiki/download/attachments/64389123/CrossDomain_PolicyFile_Specification.pdf?version=1</a><br />
				<b>Link:</b>
				view-source:<a
href="http://www.adobe.com/xml/schemas/PolicyFileSocket.xsd">http://www.adobe.com/xml/schemas/PolicyFileSocket.xsd</a><br />
		<b>Located at</b> <a href="source-class-Ratchet.Server.FlashPolicy.html#6" title="Go to source code">Ratchet/Server/FlashPolicy.php</a><br />
	</div>


	<table class="summary" id="methods">
	<caption>Methods summary</caption>
	<tr data-order="addAllowedAccess" id="_addAllowedAccess">

		<td class="attributes"><code>
			 public 
			<code><a href="class-Ratchet.Server.FlashPolicy.html">Ratchet\Server\FlashPolicy</a></code>
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_addAllowedAccess">#</a>
		<code><a href="source-class-Ratchet.Server.FlashPolicy.html#45" title="Go to source code">addAllowedAccess</a>( <span>string <var>$domain</var></span>, <span>string <var>$ports</var> = <span class="php-quote">'*'</span></span>, <span>boolean <var>$secure</var> = <span class="php-keyword1">false</span></span> )</code>

		<div class="description short">
			
<p>Add a domain to an allowed access list.</p>

		</div>

		<div class="description detailed hidden">
			
<p>Add a domain to an allowed access list.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$domain</var></dt>
					<dd><code>string</code><br>Specifies a requesting domain to be granted access. Both named domains and IP
addresses are acceptable values. Subdomains are considered different domains. A
wildcard (*) can be used to match all domains when used alone, or multiple
domains (subdomains) when used as a prefix for an explicit, second-level domain
name separated with a dot (.)</dd>
					<dt><var>$ports</var></dt>
					<dd><code>string</code><br>A comma-separated list of ports or range of ports that a socket connection is
allowed to connect to. A range of ports is specified through a dash (-) between
two port numbers. Ranges can be used with individual ports when separated with a
comma. A single wildcard (*) can be used to allow all ports.</dd>
					<dt><var>$secure</var></dt>
					<dd><code>boolean</code></dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code><code><a href="class-Ratchet.Server.FlashPolicy.html">Ratchet\Server\FlashPolicy</a></code></code><br />
				</div>



		</div>
		</div></td>
	</tr>
	<tr data-order="setSiteControl" id="_setSiteControl">

		<td class="attributes"><code>
			 public 
			<code><a href="class-Ratchet.Server.FlashPolicy.html">Ratchet\Server\FlashPolicy</a></code>
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_setSiteControl">#</a>
		<code><a href="source-class-Ratchet.Server.FlashPolicy.html#74" title="Go to source code">setSiteControl</a>( <span>string <var>$permittedCrossDomainPolicies</var> = <span class="php-quote">'all'</span></span> )</code>

		<div class="description short">
			
<p>site-control defines the meta-policy for the current domain. A meta-policy
specifies acceptable domain policy files other than the master policy file
located in the target domain's root and named crossdomain.xml.</p>

		</div>

		<div class="description detailed hidden">
			
<p>site-control defines the meta-policy for the current domain. A meta-policy
specifies acceptable domain policy files other than the master policy file
located in the target domain's root and named crossdomain.xml.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$permittedCrossDomainPolicies</var></dt>
					<dd><code>string</code></dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code><code><a href="class-Ratchet.Server.FlashPolicy.html">Ratchet\Server\FlashPolicy</a></code></code><br />
				</div>



		</div>
		</div></td>
	</tr>
	<tr data-order="onOpen" id="_onOpen">

		<td class="attributes"><code>
			 public 
			
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_onOpen">#</a>
		<code><a href="source-class-Ratchet.Server.FlashPolicy.html#93" title="Go to source code">onOpen</a>( <span><code><a href="class-Ratchet.ConnectionInterface.html">Ratchet\ConnectionInterface</a></code> <var>$conn</var></span> )</code>

		<div class="description short">
			
<p>When a new connection is opened it will be passed to this method</p>

		</div>

		<div class="description detailed hidden">
			
<p>When a new connection is opened it will be passed to this method</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$conn</var></dt>
					<dd><code>Ratchet\Connection</code><br>The socket/connection that just connected to your application</dd>
				</dl></div>


				<h4>Throws</h4>
				<div class="list">
					<code><code><a href="class-Exception.html">Exception</a></code></code><br />
				</div>


				<h4>Implementation of</h4>
				<div class="list"><code><a href="class-Ratchet.ComponentInterface.html#_onOpen">Ratchet\ComponentInterface::onOpen</a></code></div>
		</div>
		</div></td>
	</tr>
	<tr data-order="onMessage" id="_onMessage">

		<td class="attributes"><code>
			 public 
			
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_onMessage">#</a>
		<code><a href="source-class-Ratchet.Server.FlashPolicy.html#99" title="Go to source code">onMessage</a>( <span><code><a href="class-Ratchet.ConnectionInterface.html">Ratchet\ConnectionInterface</a></code> <var>$from</var></span>, <span>string <var>$msg</var></span> )</code>

		<div class="description short">
			
<p>Triggered when a client sends data through the socket</p>

		</div>

		<div class="description detailed hidden">
			
<p>Triggered when a client sends data through the socket</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$from</var></dt>
					<dd><code><code><a href="class-Ratchet.ConnectionInterface.html">Ratchet\ConnectionInterface</a></code></code><br>The socket/connection that sent the message to your application</dd>
					<dt><var>$msg</var></dt>
					<dd><code>string</code><br>The message received</dd>
				</dl></div>


				<h4>Throws</h4>
				<div class="list">
					<code><code><a href="class-Exception.html">Exception</a></code></code><br />
				</div>


				<h4>Implementation of</h4>
				<div class="list"><code><a href="class-Ratchet.MessageInterface.html#_onMessage">Ratchet\MessageInterface::onMessage</a></code></div>
		</div>
		</div></td>
	</tr>
	<tr data-order="onClose" id="_onClose">

		<td class="attributes"><code>
			 public 
			
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_onClose">#</a>
		<code><a href="source-class-Ratchet.Server.FlashPolicy.html#111" title="Go to source code">onClose</a>( <span><code><a href="class-Ratchet.ConnectionInterface.html">Ratchet\ConnectionInterface</a></code> <var>$conn</var></span> )</code>

		<div class="description short">
			
<p>This is called before or after a socket is closed (depends on how it's
closed). SendMessage to $conn will not result in an error if it has already been
closed.</p>

		</div>

		<div class="description detailed hidden">
			
<p>This is called before or after a socket is closed (depends on how it's
closed). SendMessage to $conn will not result in an error if it has already been
closed.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$conn</var></dt>
					<dd><code>Ratchet\Connection</code><br>The socket/connection that is closing/closed</dd>
				</dl></div>


				<h4>Throws</h4>
				<div class="list">
					<code><code><a href="class-Exception.html">Exception</a></code></code><br />
				</div>


				<h4>Implementation of</h4>
				<div class="list"><code><a href="class-Ratchet.ComponentInterface.html#_onClose">Ratchet\ComponentInterface::onClose</a></code></div>
		</div>
		</div></td>
	</tr>
	<tr data-order="onError" id="_onError">

		<td class="attributes"><code>
			 public 
			
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_onError">#</a>
		<code><a href="source-class-Ratchet.Server.FlashPolicy.html#117" title="Go to source code">onError</a>( <span><code><a href="class-Ratchet.ConnectionInterface.html">Ratchet\ConnectionInterface</a></code> <var>$conn</var></span>, <span><code><a href="class-Exception.html">Exception</a></code> <var>$e</var></span> )</code>

		<div class="description short">
			
<p>If there is an error with one of the sockets, or somewhere in the application
where an Exception is thrown, the Exception is sent back down the stack, handled
by the Server and bubbled back up the application through this method</p>

		</div>

		<div class="description detailed hidden">
			
<p>If there is an error with one of the sockets, or somewhere in the application
where an Exception is thrown, the Exception is sent back down the stack, handled
by the Server and bubbled back up the application through this method</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$conn</var></dt>
					<dd><code>Ratchet\Connection</code></dd>
					<dt><var>$e</var></dt>
					<dd><code><code><a href="class-Exception.html">Exception</a></code></code></dd>
				</dl></div>


				<h4>Throws</h4>
				<div class="list">
					<code><code><a href="class-Exception.html">Exception</a></code></code><br />
				</div>


				<h4>Implementation of</h4>
				<div class="list"><code><a href="class-Ratchet.ComponentInterface.html#_onError">Ratchet\ComponentInterface::onError</a></code></div>
		</div>
		</div></td>
	</tr>
	<tr data-order="renderPolicy" id="_renderPolicy">

		<td class="attributes"><code>
			 public 
			<code><a href="class-SimpleXMLElement.html">SimpleXMLElement</a></code>
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_renderPolicy">#</a>
		<code><a href="source-class-Ratchet.Server.FlashPolicy.html#124" title="Go to source code">renderPolicy</a>( )</code>

		<div class="description short">
			
<p>Builds the crossdomain file based on the template policy</p>

		</div>

		<div class="description detailed hidden">
			
<p>Builds the crossdomain file based on the template policy</p>




				<h4>Returns</h4>
				<div class="list">
					<code><code><a href="class-SimpleXMLElement.html">SimpleXMLElement</a></code></code><br />
				</div>



		</div>
		</div></td>
	</tr>
	<tr data-order="validateSiteControl" id="_validateSiteControl">

		<td class="attributes"><code>
			 public 
			boolean
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_validateSiteControl">#</a>
		<code><a href="source-class-Ratchet.Server.FlashPolicy.html#154" title="Go to source code">validateSiteControl</a>( <span>string <var>$permittedCrossDomainPolicies</var></span> )</code>

		<div class="description short">
			
<p>Make sure the proper site control was passed</p>

		</div>

		<div class="description detailed hidden">
			
<p>Make sure the proper site control was passed</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$permittedCrossDomainPolicies</var></dt>
					<dd><code>string</code></dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code>boolean</code><br />
				</div>



		</div>
		</div></td>
	</tr>
	<tr data-order="validateDomain" id="_validateDomain">

		<td class="attributes"><code>
			 public 
			boolean
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_validateDomain">#</a>
		<code><a href="source-class-Ratchet.Server.FlashPolicy.html#165" title="Go to source code">validateDomain</a>( <span>string <var>$domain</var></span> )</code>

		<div class="description short">
			
<p>Validate for proper domains (wildcards allowed)</p>

		</div>

		<div class="description detailed hidden">
			
<p>Validate for proper domains (wildcards allowed)</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$domain</var></dt>
					<dd><code>string</code></dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code>boolean</code><br />
				</div>



		</div>
		</div></td>
	</tr>
	<tr data-order="validatePorts" id="_validatePorts">

		<td class="attributes"><code>
			 public 
			boolean
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_validatePorts">#</a>
		<code><a href="source-class-Ratchet.Server.FlashPolicy.html#175" title="Go to source code">validatePorts</a>( <span>string <var>$port</var></span> )</code>

		<div class="description short">
			
<p>Make sure valid ports were passed</p>

		</div>

		<div class="description detailed hidden">
			
<p>Make sure valid ports were passed</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$port</var></dt>
					<dd><code>string</code></dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code>boolean</code><br />
				</div>



		</div>
		</div></td>
	</tr>
	</table>







	<table class="summary" id="properties">
	<caption>Properties summary</caption>
	<tr data-order="_policy" id="$_policy">

		<td class="attributes"><code>
			protected 
			string
		</code></td>

		<td class="name">
				<a href="source-class-Ratchet.Server.FlashPolicy.html#18" title="Go to source code"><var>$_policy</var></a>
		</td>
		<td class="value"><code><span class="php-quote">'&lt;?xml version=&quot;1.0&quot;?&gt;&lt;!DOCTYPE cross-domain-policy SYSTEM &quot;http://www.adobe.com/xml/dtds/cross-domain-policy.dtd&quot;&gt;&lt;cross-domain-policy&gt;&lt;/cross-domain-policy&gt;'</span></code></td>
		<td class="description"><div>
			<a href="#$_policy" class="anchor">#</a>

			<div class="description short">
				
<p>Contains the root policy node</p>

			</div>

			<div class="description detailed hidden">
				
<p>Contains the root policy node</p>


			</div>
		</div></td>
	</tr>
	<tr data-order="_access" id="$_access">

		<td class="attributes"><code>
			protected 
			array
		</code></td>

		<td class="name">
				<a href="source-class-Ratchet.Server.FlashPolicy.html#24" title="Go to source code"><var>$_access</var></a>
		</td>
		<td class="value"><code><span class="php-keyword1">array</span>()</code></td>
		<td class="description"><div>
			<a href="#$_access" class="anchor">#</a>

			<div class="description short">
				
<p>Stores an array of allowed domains and their ports</p>

			</div>

			<div class="description detailed hidden">
				
<p>Stores an array of allowed domains and their ports</p>


			</div>
		</div></td>
	</tr>
	<tr data-order="_siteControl" id="$_siteControl">

		<td class="attributes"><code>
			protected 
			string
		</code></td>

		<td class="name">
				<a href="source-class-Ratchet.Server.FlashPolicy.html#30" title="Go to source code"><var>$_siteControl</var></a>
		</td>
		<td class="value"><code><span class="php-quote">''</span></code></td>
		<td class="description"><div>
			<a href="#$_siteControl" class="anchor">#</a>

			<div class="description short">
				
			</div>

			<div class="description detailed hidden">
				

			</div>
		</div></td>
	</tr>
	<tr data-order="_cache" id="$_cache">

		<td class="attributes"><code>
			protected 
			string
		</code></td>

		<td class="name">
				<a href="source-class-Ratchet.Server.FlashPolicy.html#35" title="Go to source code"><var>$_cache</var></a>
		</td>
		<td class="value"><code><span class="php-quote">''</span></code></td>
		<td class="description"><div>
			<a href="#$_cache" class="anchor">#</a>

			<div class="description short">
				
			</div>

			<div class="description detailed hidden">
				

			</div>
		</div></td>
	</tr>
	<tr data-order="_cacheValid" id="$_cacheValid">

		<td class="attributes"><code>
			protected 
			string
		</code></td>

		<td class="name">
				<a href="source-class-Ratchet.Server.FlashPolicy.html#40" title="Go to source code"><var>$_cacheValid</var></a>
		</td>
		<td class="value"><code><span class="php-keyword1">false</span></code></td>
		<td class="description"><div>
			<a href="#$_cacheValid" class="anchor">#</a>

			<div class="description short">
				
			</div>

			<div class="description detailed hidden">
				

			</div>
		</div></td>
	</tr>
	</table>



</div>

	<div id="footer">
		Ratchet API documentation generated by <a href="http://apigen.org">ApiGen 2.6.1</a>
	</div>
</div>
</div>
</body>
</html>
