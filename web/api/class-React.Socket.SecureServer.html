<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="generator" content="ApiGen 2.8.0" />

	<title>Class React\Socket\SecureServer | Ratchet</title>

	<script type="text/javascript" src="resources/combined.js?1933933094"></script>
	<script type="text/javascript" src="elementlist.js?2449285623"></script>
	<link rel="stylesheet" type="text/css" media="all" href="resources/style.css?3505392360" />

</head>

<body>
<div id="left">
	<div id="menu">
		<a href="index.html" title="Overview"><span>Overview</span></a>


		<div id="groups">
			<h3>Namespaces</h3>
			<ul>
				<li><a href="namespace-Evenement.html">Evenement</a>
						</li>
				<li><a href="namespace-None.html">None</a>
						</li>
				<li><a href="namespace-PHP.html">PHP</a>
						</li>
				<li><a href="namespace-Psr.html">Psr<span></span></a>
						<ul>
				<li><a href="namespace-Psr.Http.html">Http<span></span></a>
						<ul>
				<li><a href="namespace-Psr.Http.Message.html">Message</a>
						</li>
							</ul></li></ul></li>
				<li><a href="namespace-Ratchet.html">Ratchet<span></span></a>
						<ul>
				<li><a href="namespace-Ratchet.Http.html">Http</a>
						</li>
				<li><a href="namespace-Ratchet.RFC6455.html">RFC6455<span></span></a>
						<ul>
				<li><a href="namespace-Ratchet.RFC6455.Handshake.html">Handshake</a>
						</li>
				<li><a href="namespace-Ratchet.RFC6455.Messaging.html">Messaging</a>
						</li>
							</ul></li>
				<li><a href="namespace-Ratchet.Server.html">Server</a>
						</li>
				<li><a href="namespace-Ratchet.Session.html">Session<span></span></a>
						<ul>
				<li><a href="namespace-Ratchet.Session.Serialize.html">Serialize</a>
						</li>
				<li><a href="namespace-Ratchet.Session.Storage.html">Storage<span></span></a>
						<ul>
				<li><a href="namespace-Ratchet.Session.Storage.Proxy.html">Proxy</a>
						</li>
							</ul></li></ul></li>
				<li><a href="namespace-Ratchet.Wamp.html">Wamp</a>
						</li>
				<li><a href="namespace-Ratchet.WebSocket.html">WebSocket</a>
						</li>
							</ul></li>
				<li class="active"><a href="namespace-React.html">React<span></span></a>
						<ul>
				<li><a href="namespace-React.EventLoop.html">EventLoop<span></span></a>
						<ul>
				<li><a href="namespace-React.EventLoop.Tick.html">Tick</a>
						</li>
				<li><a href="namespace-React.EventLoop.Timer.html">Timer</a>
						</li>
							</ul></li>
				<li class="active"><a href="namespace-React.Socket.html">Socket</a>
						</li>
				<li><a href="namespace-React.Stream.html">Stream</a>
						</li>
							</ul></li>
				<li><a href="namespace-Symfony.html">Symfony<span></span></a>
						<ul>
				<li><a href="namespace-Symfony.Component.html">Component<span></span></a>
						<ul>
				<li><a href="namespace-Symfony.Component.HttpFoundation.html">HttpFoundation<span></span></a>
						<ul>
				<li><a href="namespace-Symfony.Component.HttpFoundation.Session.html">Session<span></span></a>
						<ul>
				<li><a href="namespace-Symfony.Component.HttpFoundation.Session.Attribute.html">Attribute</a>
						</li>
				<li><a href="namespace-Symfony.Component.HttpFoundation.Session.Flash.html">Flash</a>
						</li>
				<li><a href="namespace-Symfony.Component.HttpFoundation.Session.Storage.html">Storage<span></span></a>
						<ul>
				<li><a href="namespace-Symfony.Component.HttpFoundation.Session.Storage.Handler.html">Handler</a>
						</li>
				<li><a href="namespace-Symfony.Component.HttpFoundation.Session.Storage.Proxy.html">Proxy</a>
						</li>
							</ul></li></ul></li></ul></li>
				<li><a href="namespace-Symfony.Component.Routing.html">Routing<span></span></a>
						<ul>
				<li><a href="namespace-Symfony.Component.Routing.Annotation.html">Annotation</a>
						</li>
				<li><a href="namespace-Symfony.Component.Routing.Exception.html">Exception</a>
						</li>
				<li><a href="namespace-Symfony.Component.Routing.Generator.html">Generator<span></span></a>
						<ul>
				<li><a href="namespace-Symfony.Component.Routing.Generator.Dumper.html">Dumper</a>
						</li>
							</ul></li>
				<li><a href="namespace-Symfony.Component.Routing.Loader.html">Loader<span></span></a>
						<ul>
				<li><a href="namespace-Symfony.Component.Routing.Loader.DependencyInjection.html">DependencyInjection</a>
						</li>
							</ul></li>
				<li><a href="namespace-Symfony.Component.Routing.Matcher.html">Matcher<span></span></a>
						<ul>
				<li><a href="namespace-Symfony.Component.Routing.Matcher.Dumper.html">Dumper</a>
						</li>
							</ul></li>
				<li><a href="namespace-Symfony.Component.Routing.Tests.html">Tests<span></span></a>
						<ul>
				<li><a href="namespace-Symfony.Component.Routing.Tests.Annotation.html">Annotation</a>
						</li>
				<li><a href="namespace-Symfony.Component.Routing.Tests.Fixtures.html">Fixtures<span></span></a>
						<ul>
				<li><a href="namespace-Symfony.Component.Routing.Tests.Fixtures.AnnotatedClasses.html">AnnotatedClasses</a>
						</li>
				<li><a href="namespace-Symfony.Component.Routing.Tests.Fixtures.OtherAnnotatedClasses.html">OtherAnnotatedClasses</a>
						</li>
							</ul></li>
				<li><a href="namespace-Symfony.Component.Routing.Tests.Generator.html">Generator<span></span></a>
						<ul>
				<li><a href="namespace-Symfony.Component.Routing.Tests.Generator.Dumper.html">Dumper</a>
						</li>
							</ul></li>
				<li><a href="namespace-Symfony.Component.Routing.Tests.Loader.html">Loader</a>
						</li>
				<li><a href="namespace-Symfony.Component.Routing.Tests.Matcher.html">Matcher<span></span></a>
						<ul>
				<li><a href="namespace-Symfony.Component.Routing.Tests.Matcher.Dumper.html">Dumper</a>
						</li>
							</ul></li></ul></li></ul></li></ul></li></ul></li>
			</ul>
		</div>

		<hr />


		<div id="elements">
			<h3>Classes</h3>
			<ul>
				<li><a href="class-React.Socket.Connector.html">Connector</a></li>
				<li><a href="class-React.Socket.DnsConnector.html">DnsConnector</a></li>
				<li><a href="class-React.Socket.LimitingServer.html">LimitingServer</a></li>
				<li><a href="class-React.Socket.SecureConnector.html">SecureConnector</a></li>
				<li class="active"><a href="class-React.Socket.SecureServer.html">SecureServer</a></li>
				<li><a href="class-React.Socket.Server.html">Server</a></li>
				<li><a href="class-React.Socket.TcpConnector.html">TcpConnector</a></li>
				<li><a href="class-React.Socket.TimeoutConnector.html">TimeoutConnector</a></li>
				<li><a href="class-React.Socket.UnixConnector.html">UnixConnector</a></li>
			</ul>

			<h3>Interfaces</h3>
			<ul>
				<li><a href="class-React.Socket.ConnectionInterface.html">ConnectionInterface</a></li>
				<li><a href="class-React.Socket.ConnectorInterface.html">ConnectorInterface</a></li>
				<li><a href="class-React.Socket.ServerInterface.html">ServerInterface</a></li>
			</ul>




		</div>
	</div>
</div>

<div id="splitter"></div>

<div id="right">
<div id="rightInner">
	<form id="search">
		<input type="hidden" name="cx" value="" />
		<input type="hidden" name="ie" value="UTF-8" />
		<input type="text" name="q" class="text" />
		<input type="submit" value="Search" />
	</form>

	<div id="navigation">
		<ul>
			<li>
				<a href="index.html" title="Overview"><span>Overview</span></a>
			</li>
			<li>
				<a href="namespace-React.Socket.html" title="Summary of React\Socket"><span>Namespace</span></a>
			</li>
			<li class="active">
<span>Class</span>			</li>
		</ul>
		<ul>
			<li>
				<a href="tree.html" title="Tree view of classes, interfaces, traits and exceptions"><span>Tree</span></a>
			</li>
		</ul>
		<ul>
		</ul>
	</div>

<div id="content" class="class">
	<h1>Class SecureServer</h1>


	<div class="description">
	
<p>The <code>SecureServer</code> class implements the
<code>ServerInterface</code> and is responsible for providing a secure TLS
(formerly known as SSL) server.</p>

<p>It does so by wrapping a <code>Server</code> instance which waits for
plaintext TCP/IP connections and then performs a TLS handshake for each
connection.</p>

<p><code>`</code>php $server = new Server(8000, $loop); $server = new
SecureServer($server, $loop, array( // tls context options here… ));
<code>`</code></p>

<p>Whenever a client completes the TLS handshake, it will emit a
<code>connection</code> event with a connection instance implementing
[<code>ConnectionInterface</code>](#connectioninterface):</p>

<p><code>`</code>php $server-&gt;on('connection', function (ConnectionInterface
$connection) { echo 'Secure connection from' .
$connection-&gt;getRemoteAddress() . PHP_EOL;<br />
$connection-&gt;write('hello there!' . PHP_EOL); … }); <code>`</code></p>

<p>Whenever a client fails to perform a successful TLS handshake, it will emit
an <code>error</code> event and then close the underlying TCP/IP connection:</p>

<p><code>`</code>php $server-&gt;on('error', function (Exception $e) { echo
'Error' . $e-&gt;getMessage() . PHP_EOL; }); <code>`</code></p>

<p>See also the <code>ServerInterface</code> for more details.</p>

<p>Note that the <code>SecureServer</code> class is a concrete implementation
for TLS sockets. If you want to typehint in your higher-level protocol
implementation, you SHOULD use the generic <code>ServerInterface</code>
instead.</p>

	</div>

	<dl class="tree">
		<dd style="padding-left:0px">
			<a href="class-Evenement.EventEmitter.html"><span>Evenement\EventEmitter</span></a>
			
			 implements 
				<a href="class-Evenement.EventEmitterInterface.html"><span>Evenement\EventEmitterInterface</span></a>
			
			 uses 
				<a href="class-Evenement.EventEmitterTrait.html"><span>Evenement\EventEmitterTrait</span></a>
			
		</dd>
		<dd style="padding-left:30px">
			<img src="resources/inherit.png" alt="Extended by" />
<b><span>React\Socket\SecureServer</span></b>			
			 implements 
				<a href="class-React.Socket.ServerInterface.html"><span>React\Socket\ServerInterface</span></a>
			
			
		</dd>
	</dl>








	<div class="info">
		<b>Final</b><br />
		
		<b>Namespace:</b> <a href="namespace-React.html">React</a>\<a href="namespace-React.Socket.html">Socket</a><br />
		

				<b>See:</b>
				<code><code><a href="class-React.Socket.ServerInterface.html">React\Socket\ServerInterface</a></code></code><br />
				<b>See:</b>
				<code><code><a href="class-React.Socket.ConnectionInterface.html">React\Socket\ConnectionInterface</a></code></code><br />
		<b>Located at</b> <a href="source-class-React.Socket.SecureServer.html#11-188" title="Go to source code">SecureServer.php</a><br />
	</div>



	<table class="summary" id="methods">
	<caption>Methods summary</caption>
	<tr data-order="__construct" id="___construct">

		<td class="attributes"><code>
			 public 
			
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#___construct">#</a>
		<code><a href="source-class-React.Socket.SecureServer.html#61-141" title="Go to source code">__construct</a>( <span><code><a href="class-React.Socket.ServerInterface.html">React\Socket\ServerInterface</a></code> <var>$tcp</var></span>, <span><code><a href="class-React.EventLoop.LoopInterface.html">React\EventLoop\LoopInterface</a></code> <var>$loop</var></span>, <span>array <var>$context</var></span> )</code>

		<div class="description short">
			
<p>Creates a secure TLS server and starts waiting for incoming connections</p>

		</div>

		<div class="description detailed hidden">
			
<p>Creates a secure TLS server and starts waiting for incoming connections</p>

<p>It does so by wrapping a <code>Server</code> instance which waits for
plaintext TCP/IP connections and then performs a TLS handshake for each
connection. It thus requires valid [TLS context options], which in its most
basic form may look something like this if you're using a PEM encoded
certificate file:</p>

<p><code>`</code>php $server = new Server(8000, $loop); $server = new
SecureServer($server, $loop, array( 'local_cert' =&gt; 'server.pem' ));
<code>`</code></p>

<p>Note that the certificate file will not be loaded on instantiation but when
an incoming connection initializes its TLS context. This implies that any
invalid certificate file paths or contents will only cause an <code>error</code>
event at a later time.</p>

<p>If your private key is encrypted with a passphrase, you have to specify it
like this:</p>

<p><code>`</code>php $server = new Server(8000, $loop); $server = new
SecureServer($server, $loop, array( 'local_cert' =&gt; 'server.pem',
'passphrase' =&gt; 'secret' )); <code>`</code></p>

<p>Note that available [TLS context options], their defaults and effects of
changing these may vary depending on your system and/or PHP version. Passing
unknown context options has no effect.</p>

<p>Advanced usage: Despite allowing any <code>ServerInterface</code> as first
parameter, you SHOULD pass a <code>Server</code> instance as first parameter,
unless you know what you're doing. Internally, the <code>SecureServer</code> has
to set the required TLS context options on the underlying stream resources.
These resources are not exposed through any of the interfaces defined in this
package, but only through the <code>React\Stream\Stream</code> class. The
<code>Server</code> class is guaranteed to emit connections that implement the
<code>ConnectionInterface</code> and also extend the <code>Stream</code> class
in order to expose these underlying resources. If you use a custom
<code>ServerInterface</code> and its <code>connection</code> event does not meet
this requirement, the <code>SecureServer</code> will emit an <code>error</code>
event and then close the underlying connection.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$tcp</var></dt>
					<dd><code><code><a href="class-React.Socket.ServerInterface.html">React\Socket\ServerInterface</a></code>|<code><a href="class-React.Socket.Server.html">React\Socket\Server</a></code></code><br>$tcp</dd>
					<dt><var>$loop</var></dt>
					<dd><code><code><a href="class-React.EventLoop.LoopInterface.html">React\EventLoop\LoopInterface</a></code></code><br>$loop</dd>
					<dt><var>$context</var></dt>
					<dd><code>array</code><br>$context</dd>
				</dl></div>


				<h4>Throws</h4>
				<div class="list">
					<code><code><a href="class-BadMethodCallException.html">BadMethodCallException</a></code></code><br>for legacy HHVM &lt; 3.8 due to lack of support<br />
				</div>

				<h4>See</h4>
				<div class="list">
						<code><code><a href="class-React.Socket.Server.html">React\Socket\Server</a></code></code><br />
				</div>
				<h4>Link</h4>
				<div class="list">
						<a href="http://php.net/manual/en/context.ssl.php">for TLS context options</a><br />
				</div>


		</div>
		</div></td>
	</tr>
	<tr data-order="getAddress" id="_getAddress">

		<td class="attributes"><code>
			 public 
			?string
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_getAddress">#</a>
		<code><a href="source-class-React.Socket.SecureServer.html#143-146" title="Go to source code">getAddress</a>( )</code>

		<div class="description short">
			
<p>Returns the full address (IP and port) this server is currently listening
on</p>

		</div>

		<div class="description detailed hidden">
			
<p>Returns the full address (IP and port) this server is currently listening
on</p>

<p><code>`</code>php $address = $server-&gt;getAddress(); echo 'Server listening
on ' . $address . PHP_EOL; <code>`</code></p>

<p>It will return the full address (IP and port) or <code>NULL</code> if it is
unknown (not applicable to this server socket or already closed).</p>

<p>If this is a TCP/IP based server and you only want the local port, you may
use something like this:</p>

<p><code>`</code>php $address = $server-&gt;getAddress(); $port =
parse_url('tcp://' . $address, PHP_URL_PORT); echo 'Server listening on port ' .
$port . PHP_EOL; <code>`</code></p>




				<h4>Returns</h4>
				<div class="list">
					<code>?string</code><br>the full listening address (IP and port) or NULL if it is unknown (not
applicable to this server socket or already closed)<br />
				</div>




				<h4>Implementation of</h4>
				<div class="list"><code><a href="class-React.Socket.ServerInterface.html#_getAddress">React\Socket\ServerInterface::getAddress()</a></code></div>
		</div>
		</div></td>
	</tr>
	<tr data-order="pause" id="_pause">

		<td class="attributes"><code>
			 public 
			
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_pause">#</a>
		<code><a href="source-class-React.Socket.SecureServer.html#148-151" title="Go to source code">pause</a>( )</code>

		<div class="description short">
			
<p>Pauses accepting new incoming connections.</p>

		</div>

		<div class="description detailed hidden">
			
<p>Pauses accepting new incoming connections.</p>

<p>Removes the socket resource from the EventLoop and thus stop accepting new
connections. Note that the listening socket stays active and is not closed.</p>

<p>This means that new incoming connections will stay pending in the operating
system backlog until its configurable backlog is filled. Once the backlog is
filled, the operating system may reject further incoming connections until the
backlog is drained again by resuming to accept new connections.</p>

<p>Once the server is paused, no futher <code>connection</code> events SHOULD be
emitted.</p>

<p><code>`</code>php $server-&gt;pause();</p>

<p>$server-&gt;on('connection', assertShouldNeverCalled()); <code>`</code></p>

<p>This method is advisory-only, though generally not recommended, the server
MAY continue emitting <code>connection</code> events.</p>

<p>Unless otherwise noted, a successfully opened server SHOULD NOT start in
paused state.</p>

<p>You can continue processing events by calling <code>resume()</code>
again.</p>

<p>Note that both methods can be called any number of times, in particular
calling <code>pause()</code> more than once SHOULD NOT have any effect.
Similarly, calling this after <code>close()</code> is a NO-OP.</p>






				<h4>See</h4>
				<div class="list">
						<code><code><a href="class-React.Socket.SecureServer.html#_resume">React\Socket\SecureServer::resume()</a></code></code><br />
				</div>


				<h4>Implementation of</h4>
				<div class="list"><code><a href="class-React.Socket.ServerInterface.html#_pause">React\Socket\ServerInterface::pause()</a></code></div>
		</div>
		</div></td>
	</tr>
	<tr data-order="resume" id="_resume">

		<td class="attributes"><code>
			 public 
			
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_resume">#</a>
		<code><a href="source-class-React.Socket.SecureServer.html#153-156" title="Go to source code">resume</a>( )</code>

		<div class="description short">
			
<p>Resumes accepting new incoming connections.</p>

		</div>

		<div class="description detailed hidden">
			
<p>Resumes accepting new incoming connections.</p>

<p>Re-attach the socket resource to the EventLoop after a previous
<code>pause()</code>.</p>

<p><code>`</code>php $server-&gt;pause();</p>

<p>$loop-&gt;addTimer(1.0, function () use ($server) { $server-&gt;resume(); });
<code>`</code></p>

<p>Note that both methods can be called any number of times, in particular
calling <code>resume()</code> without a prior <code>pause()</code> SHOULD NOT
have any effect. Similarly, calling this after <code>close()</code> is a
NO-OP.</p>






				<h4>See</h4>
				<div class="list">
						<code><code><a href="class-React.Socket.SecureServer.html#_pause">React\Socket\SecureServer::pause()</a></code></code><br />
				</div>


				<h4>Implementation of</h4>
				<div class="list"><code><a href="class-React.Socket.ServerInterface.html#_resume">React\Socket\ServerInterface::resume()</a></code></div>
		</div>
		</div></td>
	</tr>
	<tr data-order="close" id="_close">

		<td class="attributes"><code>
			 public 
			
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_close">#</a>
		<code><a href="source-class-React.Socket.SecureServer.html#158-161" title="Go to source code">close</a>( )</code>

		<div class="description short">
			
<p>Shuts down this listening socket</p>

		</div>

		<div class="description detailed hidden">
			
<p>Shuts down this listening socket</p>

<p>This will stop listening for new incoming connections on this socket.</p>

<p>Calling this method more than once on the same instance is a NO-OP.</p>








				<h4>Implementation of</h4>
				<div class="list"><code><a href="class-React.Socket.ServerInterface.html#_close">React\Socket\ServerInterface::close()</a></code></div>
		</div>
		</div></td>
	</tr>
	</table>

	<table class="summary inherited">
	<caption>Methods inherited from <a href="class-Evenement.EventEmitterInterface.html#methods">Evenement\EventEmitterInterface</a></caption>
	<tr>
		<td><code>
			<a href="class-Evenement.EventEmitterInterface.html#_emit">emit()</a>, 
			<a href="class-Evenement.EventEmitterInterface.html#_listeners">listeners()</a>, 
			<a href="class-Evenement.EventEmitterInterface.html#_on">on()</a>, 
			<a href="class-Evenement.EventEmitterInterface.html#_once">once()</a>, 
			<a href="class-Evenement.EventEmitterInterface.html#_removeAllListeners">removeAllListeners()</a>, 
			<a href="class-Evenement.EventEmitterInterface.html#_removeListener">removeListener()</a>
		</code></td>
	</tr>
	</table>

	<table class="summary used">
	<caption>Methods used from <a href="class-Evenement.EventEmitterTrait.html#methods">Evenement\EventEmitterTrait</a></caption>
	<tr>
		<td><code>
			<a href="class-Evenement.EventEmitterTrait.html#_emit">()</a>, 
			<a href="class-Evenement.EventEmitterTrait.html#_listeners">()</a>, 
			<a href="class-Evenement.EventEmitterTrait.html#_on">()</a>, 
			<a href="class-Evenement.EventEmitterTrait.html#_once">()</a>, 
			<a href="class-Evenement.EventEmitterTrait.html#_removeAllListeners">()</a>, 
			<a href="class-Evenement.EventEmitterTrait.html#_removeListener">()</a>
		</code></td>
	</tr>
	</table>












	<table class="summary used">
	<caption>Properties used from <a href="class-Evenement.EventEmitterTrait.html#properties">Evenement\EventEmitterTrait</a></caption>
	<tr>
		<td><code>
			<a href="class-Evenement.EventEmitterTrait.html#$listeners"><var>$listeners</var></a>
		</code></td>
	</tr>
	</table>




</div>

	<div id="footer">
		Ratchet API documentation generated by <a href="http://apigen.org">ApiGen 2.8.0</a>
	</div>
</div>
</div>
</body>
</html>
