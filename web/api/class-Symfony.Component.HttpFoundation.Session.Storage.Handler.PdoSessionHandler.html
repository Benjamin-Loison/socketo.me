<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="generator" content="ApiGen 2.8.0" />

	<title>Class Symfony\Component\HttpFoundation\Session\Storage\Handler\PdoSessionHandler | Ratchet</title>

	<script type="text/javascript" src="resources/combined.js?1933933094"></script>
	<script type="text/javascript" src="elementlist.js?2449285623"></script>
	<link rel="stylesheet" type="text/css" media="all" href="resources/style.css?3505392360" />

</head>

<body>
<div id="left">
	<div id="menu">
		<a href="index.html" title="Overview"><span>Overview</span></a>


		<div id="groups">
			<h3>Namespaces</h3>
			<ul>
				<li><a href="namespace-Evenement.html">Evenement</a>
						</li>
				<li><a href="namespace-None.html">None</a>
						</li>
				<li><a href="namespace-PHP.html">PHP</a>
						</li>
				<li><a href="namespace-Psr.html">Psr<span></span></a>
						<ul>
				<li><a href="namespace-Psr.Http.html">Http<span></span></a>
						<ul>
				<li><a href="namespace-Psr.Http.Message.html">Message</a>
						</li>
							</ul></li></ul></li>
				<li><a href="namespace-Ratchet.html">Ratchet<span></span></a>
						<ul>
				<li><a href="namespace-Ratchet.Http.html">Http</a>
						</li>
				<li><a href="namespace-Ratchet.RFC6455.html">RFC6455<span></span></a>
						<ul>
				<li><a href="namespace-Ratchet.RFC6455.Handshake.html">Handshake</a>
						</li>
				<li><a href="namespace-Ratchet.RFC6455.Messaging.html">Messaging</a>
						</li>
							</ul></li>
				<li><a href="namespace-Ratchet.Server.html">Server</a>
						</li>
				<li><a href="namespace-Ratchet.Session.html">Session<span></span></a>
						<ul>
				<li><a href="namespace-Ratchet.Session.Serialize.html">Serialize</a>
						</li>
				<li><a href="namespace-Ratchet.Session.Storage.html">Storage<span></span></a>
						<ul>
				<li><a href="namespace-Ratchet.Session.Storage.Proxy.html">Proxy</a>
						</li>
							</ul></li></ul></li>
				<li><a href="namespace-Ratchet.Wamp.html">Wamp</a>
						</li>
				<li><a href="namespace-Ratchet.WebSocket.html">WebSocket</a>
						</li>
							</ul></li>
				<li><a href="namespace-React.html">React<span></span></a>
						<ul>
				<li><a href="namespace-React.EventLoop.html">EventLoop<span></span></a>
						<ul>
				<li><a href="namespace-React.EventLoop.Tick.html">Tick</a>
						</li>
				<li><a href="namespace-React.EventLoop.Timer.html">Timer</a>
						</li>
							</ul></li>
				<li><a href="namespace-React.Socket.html">Socket</a>
						</li>
				<li><a href="namespace-React.Stream.html">Stream</a>
						</li>
							</ul></li>
				<li class="active"><a href="namespace-Symfony.html">Symfony<span></span></a>
						<ul>
				<li class="active"><a href="namespace-Symfony.Component.html">Component<span></span></a>
						<ul>
				<li class="active"><a href="namespace-Symfony.Component.HttpFoundation.html">HttpFoundation<span></span></a>
						<ul>
				<li class="active"><a href="namespace-Symfony.Component.HttpFoundation.Session.html">Session<span></span></a>
						<ul>
				<li><a href="namespace-Symfony.Component.HttpFoundation.Session.Attribute.html">Attribute</a>
						</li>
				<li><a href="namespace-Symfony.Component.HttpFoundation.Session.Flash.html">Flash</a>
						</li>
				<li class="active"><a href="namespace-Symfony.Component.HttpFoundation.Session.Storage.html">Storage<span></span></a>
						<ul>
				<li class="active"><a href="namespace-Symfony.Component.HttpFoundation.Session.Storage.Handler.html">Handler</a>
						</li>
				<li><a href="namespace-Symfony.Component.HttpFoundation.Session.Storage.Proxy.html">Proxy</a>
						</li>
							</ul></li></ul></li></ul></li>
				<li><a href="namespace-Symfony.Component.Routing.html">Routing<span></span></a>
						<ul>
				<li><a href="namespace-Symfony.Component.Routing.Annotation.html">Annotation</a>
						</li>
				<li><a href="namespace-Symfony.Component.Routing.Exception.html">Exception</a>
						</li>
				<li><a href="namespace-Symfony.Component.Routing.Generator.html">Generator<span></span></a>
						<ul>
				<li><a href="namespace-Symfony.Component.Routing.Generator.Dumper.html">Dumper</a>
						</li>
							</ul></li>
				<li><a href="namespace-Symfony.Component.Routing.Loader.html">Loader<span></span></a>
						<ul>
				<li><a href="namespace-Symfony.Component.Routing.Loader.DependencyInjection.html">DependencyInjection</a>
						</li>
							</ul></li>
				<li><a href="namespace-Symfony.Component.Routing.Matcher.html">Matcher<span></span></a>
						<ul>
				<li><a href="namespace-Symfony.Component.Routing.Matcher.Dumper.html">Dumper</a>
						</li>
							</ul></li>
				<li><a href="namespace-Symfony.Component.Routing.Tests.html">Tests<span></span></a>
						<ul>
				<li><a href="namespace-Symfony.Component.Routing.Tests.Annotation.html">Annotation</a>
						</li>
				<li><a href="namespace-Symfony.Component.Routing.Tests.Fixtures.html">Fixtures<span></span></a>
						<ul>
				<li><a href="namespace-Symfony.Component.Routing.Tests.Fixtures.AnnotatedClasses.html">AnnotatedClasses</a>
						</li>
				<li><a href="namespace-Symfony.Component.Routing.Tests.Fixtures.OtherAnnotatedClasses.html">OtherAnnotatedClasses</a>
						</li>
							</ul></li>
				<li><a href="namespace-Symfony.Component.Routing.Tests.Generator.html">Generator<span></span></a>
						<ul>
				<li><a href="namespace-Symfony.Component.Routing.Tests.Generator.Dumper.html">Dumper</a>
						</li>
							</ul></li>
				<li><a href="namespace-Symfony.Component.Routing.Tests.Loader.html">Loader</a>
						</li>
				<li><a href="namespace-Symfony.Component.Routing.Tests.Matcher.html">Matcher<span></span></a>
						<ul>
				<li><a href="namespace-Symfony.Component.Routing.Tests.Matcher.Dumper.html">Dumper</a>
						</li>
							</ul></li></ul></li></ul></li></ul></li></ul></li>
			</ul>
		</div>

		<hr />


		<div id="elements">
			<h3>Classes</h3>
			<ul>
				<li><a href="class-Symfony.Component.HttpFoundation.Session.Storage.Handler.MemcachedSessionHandler.html">MemcachedSessionHandler</a></li>
				<li><a href="class-Symfony.Component.HttpFoundation.Session.Storage.Handler.MemcacheSessionHandler.html">MemcacheSessionHandler</a></li>
				<li><a href="class-Symfony.Component.HttpFoundation.Session.Storage.Handler.MongoDbSessionHandler.html">MongoDbSessionHandler</a></li>
				<li><a href="class-Symfony.Component.HttpFoundation.Session.Storage.Handler.NativeFileSessionHandler.html">NativeFileSessionHandler</a></li>
				<li><a href="class-Symfony.Component.HttpFoundation.Session.Storage.Handler.NativeSessionHandler.html" class="invalid">NativeSessionHandler</a></li>
				<li><a href="class-Symfony.Component.HttpFoundation.Session.Storage.Handler.NullSessionHandler.html">NullSessionHandler</a></li>
				<li class="active"><a href="class-Symfony.Component.HttpFoundation.Session.Storage.Handler.PdoSessionHandler.html">PdoSessionHandler</a></li>
				<li><a href="class-Symfony.Component.HttpFoundation.Session.Storage.Handler.WriteCheckSessionHandler.html">WriteCheckSessionHandler</a></li>
			</ul>





		</div>
	</div>
</div>

<div id="splitter"></div>

<div id="right">
<div id="rightInner">
	<form id="search">
		<input type="hidden" name="cx" value="" />
		<input type="hidden" name="ie" value="UTF-8" />
		<input type="text" name="q" class="text" />
		<input type="submit" value="Search" />
	</form>

	<div id="navigation">
		<ul>
			<li>
				<a href="index.html" title="Overview"><span>Overview</span></a>
			</li>
			<li>
				<a href="namespace-Symfony.Component.HttpFoundation.Session.Storage.Handler.html" title="Summary of Symfony\Component\HttpFoundation\Session\Storage\Handler"><span>Namespace</span></a>
			</li>
			<li class="active">
<span>Class</span>			</li>
		</ul>
		<ul>
			<li>
				<a href="tree.html" title="Tree view of classes, interfaces, traits and exceptions"><span>Tree</span></a>
			</li>
		</ul>
		<ul>
		</ul>
	</div>

<div id="content" class="class">
	<h1>Class PdoSessionHandler</h1>


	<div class="description">
	
<p>Session handler using a PDO connection to read and write data.</p>

<p>It works with MySQL, PostgreSQL, Oracle, SQL Server and SQLite and implements
different locking strategies to handle concurrent access to the same session.
Locking is necessary to prevent loss of data due to race conditions and to keep
the session data consistent between read() and write(). With locking, requests
for the same session will wait until the other one finished writing. For this
reason it's best practice to close a session as early as possible to improve
concurrency. PHPs internal files session handler also implements locking.</p>

<p>Attention: Since SQLite does not support row level locks but locks the whole
database, it means only one session can be accessed at a time. Even different
sessions would wait for another to finish. So saving session in SQLite should
only be considered for development or prototypes.</p>

<p>Session data is a binary string that can contain non-printable characters
like the null byte. For this reason it must be saved in a binary column in the
database like BLOB in MySQL. Saving it in a character column could corrupt the
data. You can use createTable() to initialize a correctly defined table.</p>

	</div>

	<dl class="tree">
		<dd style="padding-left:0px">
<b><span>Symfony\Component\HttpFoundation\Session\Storage\Handler\PdoSessionHandler</span></b>			
			 implements 
				<a href="class-SessionHandlerInterface.html"><span>SessionHandlerInterface</span></a>
			
			
		</dd>
	</dl>








	<div class="info">
		
		
		<b>Namespace:</b> <a href="namespace-Symfony.html">Symfony</a>\<a href="namespace-Symfony.Component.html">Component</a>\<a href="namespace-Symfony.Component.HttpFoundation.html">HttpFoundation</a>\<a href="namespace-Symfony.Component.HttpFoundation.Session.html">Session</a>\<a href="namespace-Symfony.Component.HttpFoundation.Session.Storage.html">Storage</a>\<a href="namespace-Symfony.Component.HttpFoundation.Session.Storage.Handler.html">Handler</a><br />
		

				<b>Author:</b>
				Fabien Potencier &lt;<a
href="mailto:fabien&#64;symfony.com">fabien&#64;<!---->symfony.com</a>&gt;<br />
				<b>Author:</b>
				Michael Williams &lt;<a
href="mailto:michael.williams&#64;funsational.com">michael.williams&#64;<!---->funsational.com</a>&gt;<br />
				<b>Author:</b>
				Tobias Schultze &lt;<a href="http://tobion.de">http://tobion.de</a>&gt;<br />
				<b>See:</b>
				<a
href="http://php.net/sessionhandlerinterface">http://php.net/sessionhandlerinterface</a><br />
		<b>Located at</b> <a href="source-class-Symfony.Component.HttpFoundation.Session.Storage.Handler.PdoSessionHandler.html#14-721" title="Go to source code">Storage/Handler/PdoSessionHandler.php</a><br />
	</div>



	<table class="summary" id="methods">
	<caption>Methods summary</caption>
	<tr data-order="__construct" id="___construct">

		<td class="attributes"><code>
			 public 
			
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#___construct">#</a>
		<code><a href="source-class-Symfony.Component.HttpFoundation.Session.Storage.Handler.PdoSessionHandler.html#150-196" title="Go to source code">__construct</a>( <span><code><a href="class-PDO.html">PDO</a></code>|string|null <var>$pdoOrDsn</var> = <span class="php-keyword1">null</span></span>, <span>array <var>$options</var> = <span class="php-keyword1">array</span>()</span> )</code>

		<div class="description short">
			
<p>Constructor.</p>

		</div>

		<div class="description detailed hidden">
			
<p>Constructor.</p>

<p>You can either pass an existing database connection as PDO instance or pass a
DSN string that will be used to lazy-connect to the database when the session is
actually used. Furthermore it's possible to pass null which will then use the
session.save_path ini setting as PDO DSN parameter.</p>

<p>List of available options: * db_table: The name of the table [default:
sessions] * db_id_col: The column where to store the session id [default:
sess_id] * db_data_col: The column where to store the session data [default:
sess_data] * db_lifetime_col: The column where to store the lifetime [default:
sess_lifetime] * db_time_col: The column where to store the timestamp [default:
sess_time] * db_username: The username when lazy-connect [default: ''] *
db_password: The password when lazy-connect [default: ''] *
db_connection_options: An array of driver-specific connection options [default:
array()] * lock_mode: The strategy for locking, see constants [default:
LOCK_TRANSACTIONAL]</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$pdoOrDsn</var></dt>
					<dd><code><code><a href="class-PDO.html">PDO</a></code>|string|null</code><br>$pdoOrDsn A \PDO instance or DSN string or null</dd>
					<dt><var>$options</var></dt>
					<dd><code>array</code><br>$options An associative array of options</dd>
				</dl></div>


				<h4>Throws</h4>
				<div class="list">
					<code><code><a href="class-InvalidArgumentException.html">InvalidArgumentException</a></code></code><br>When PDO error mode is not PDO::ERRMODE_EXCEPTION<br />
				</div>



		</div>
		</div></td>
	</tr>
	<tr data-order="createTable" id="_createTable">

		<td class="attributes"><code>
			 public 
			
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_createTable">#</a>
		<code><a href="source-class-Symfony.Component.HttpFoundation.Session.Storage.Handler.PdoSessionHandler.html#198-246" title="Go to source code">createTable</a>( )</code>

		<div class="description short">
			
<p>Creates the table to store sessions which can be called once for setup.</p>

		</div>

		<div class="description detailed hidden">
			
<p>Creates the table to store sessions which can be called once for setup.</p>

<p>Session ID is saved in a column of maximum length 128 because that is enough
even for a 512 bit configured session.hash_function like Whirlpool. Session data
is saved in a BLOB. One could also use a shorter inlined varbinary column if one
was sure the data fits into it.</p>





				<h4>Throws</h4>
				<div class="list">
					<code><code><a href="class-PDOException.html">PDOException</a></code></code><br>When the table already exists<br />
					<code><code><a href="class-DomainException.html">DomainException</a></code></code><br>When an unsupported PDO driver is used<br />
				</div>



		</div>
		</div></td>
	</tr>
	<tr data-order="isSessionExpired" id="_isSessionExpired">

		<td class="attributes"><code>
			 public 
			boolean
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_isSessionExpired">#</a>
		<code><a href="source-class-Symfony.Component.HttpFoundation.Session.Storage.Handler.PdoSessionHandler.html#248-258" title="Go to source code">isSessionExpired</a>( )</code>

		<div class="description short">
			
<p>Returns true when the current session exists but expired according to
session.gc_maxlifetime.</p>

		</div>

		<div class="description detailed hidden">
			
<p>Returns true when the current session exists but expired according to
session.gc_maxlifetime.</p>

<p>Can be used to distinguish between a new session and one that expired due to
inactivity.</p>




				<h4>Returns</h4>
				<div class="list">
					<code>boolean</code><br>Whether current session expired<br />
				</div>




		</div>
		</div></td>
	</tr>
	<tr data-order="open" id="_open">

		<td class="attributes"><code>
			 public 
			
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_open">#</a>
		<code><a href="source-class-Symfony.Component.HttpFoundation.Session.Storage.Handler.PdoSessionHandler.html#260-270" title="Go to source code">open</a>( <span>mixed <var>$savePath</var></span>, <span>mixed <var>$sessionName</var></span> )</code>

		<div class="description short">
			
		</div>

		<div class="description detailed hidden">
			







				<h4>Implementation of</h4>
				<div class="list"><code><a href="class-SessionHandlerInterface.html#_open">SessionHandlerInterface::open()</a></code></div>
		</div>
		</div></td>
	</tr>
	<tr data-order="read" id="_read">

		<td class="attributes"><code>
			 public 
			
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_read">#</a>
		<code><a href="source-class-Symfony.Component.HttpFoundation.Session.Storage.Handler.PdoSessionHandler.html#272-284" title="Go to source code">read</a>( <span>mixed <var>$sessionId</var></span> )</code>

		<div class="description short">
			
		</div>

		<div class="description detailed hidden">
			







				<h4>Implementation of</h4>
				<div class="list"><code><a href="class-SessionHandlerInterface.html#_read">SessionHandlerInterface::read()</a></code></div>
		</div>
		</div></td>
	</tr>
	<tr data-order="gc" id="_gc">

		<td class="attributes"><code>
			 public 
			
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_gc">#</a>
		<code><a href="source-class-Symfony.Component.HttpFoundation.Session.Storage.Handler.PdoSessionHandler.html#286-296" title="Go to source code">gc</a>( <span>mixed <var>$maxlifetime</var></span> )</code>

		<div class="description short">
			
		</div>

		<div class="description detailed hidden">
			







				<h4>Implementation of</h4>
				<div class="list"><code><a href="class-SessionHandlerInterface.html#_gc">SessionHandlerInterface::gc()</a></code></div>
		</div>
		</div></td>
	</tr>
	<tr data-order="destroy" id="_destroy">

		<td class="attributes"><code>
			 public 
			
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_destroy">#</a>
		<code><a href="source-class-Symfony.Component.HttpFoundation.Session.Storage.Handler.PdoSessionHandler.html#298-317" title="Go to source code">destroy</a>( <span>mixed <var>$sessionId</var></span> )</code>

		<div class="description short">
			
		</div>

		<div class="description detailed hidden">
			







				<h4>Implementation of</h4>
				<div class="list"><code><a href="class-SessionHandlerInterface.html#_destroy">SessionHandlerInterface::destroy()</a></code></div>
		</div>
		</div></td>
	</tr>
	<tr data-order="write" id="_write">

		<td class="attributes"><code>
			 public 
			
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_write">#</a>
		<code><a href="source-class-Symfony.Component.HttpFoundation.Session.Storage.Handler.PdoSessionHandler.html#319-375" title="Go to source code">write</a>( <span>mixed <var>$sessionId</var></span>, <span>mixed <var>$data</var></span> )</code>

		<div class="description short">
			
		</div>

		<div class="description detailed hidden">
			







				<h4>Implementation of</h4>
				<div class="list"><code><a href="class-SessionHandlerInterface.html#_write">SessionHandlerInterface::write()</a></code></div>
		</div>
		</div></td>
	</tr>
	<tr data-order="close" id="_close">

		<td class="attributes"><code>
			 public 
			
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_close">#</a>
		<code><a href="source-class-Symfony.Component.HttpFoundation.Session.Storage.Handler.PdoSessionHandler.html#377-404" title="Go to source code">close</a>( )</code>

		<div class="description short">
			
		</div>

		<div class="description detailed hidden">
			







				<h4>Implementation of</h4>
				<div class="list"><code><a href="class-SessionHandlerInterface.html#_close">SessionHandlerInterface::close()</a></code></div>
		</div>
		</div></td>
	</tr>
	<tr data-order="getConnection" id="_getConnection">

		<td class="attributes"><code>
			 protected 
			<code><a href="class-PDO.html">PDO</a></code>
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_getConnection">#</a>
		<code><a href="source-class-Symfony.Component.HttpFoundation.Session.Storage.Handler.PdoSessionHandler.html#708-720" title="Go to source code">getConnection</a>( )</code>

		<div class="description short">
			
<p>Return a PDO instance.</p>

		</div>

		<div class="description detailed hidden">
			
<p>Return a PDO instance.</p>




				<h4>Returns</h4>
				<div class="list">
					<code><code><a href="class-PDO.html">PDO</a></code></code><br />
				</div>




		</div>
		</div></td>
	</tr>
	</table>








	<table class="summary" id="constants">
	<caption>Constants summary</caption>
	<tr data-order="LOCK_NONE" id="LOCK_NONE">

		<td class="attributes"><code>integer</code></td>
		<td class="name"><code>
				<a href="source-class-Symfony.Component.HttpFoundation.Session.Storage.Handler.PdoSessionHandler.html#43-49" title="Go to source code"><b>LOCK_NONE</b></a>
		</code></td>
		<td class="value"><code><span class="php-num">0</span></code></td>
		<td class="description"><div>
			<a href="#LOCK_NONE" class="anchor">#</a>

			<div class="description short">
				
<p>No locking is done. This means sessions are prone to loss of data due to race
conditions of concurrent requests to the same session. The last session write
will win in this case. It might be useful when you implement your own logic to
deal with this like an optimistic approach.</p>

			</div>

			<div class="description detailed hidden">
				
<p>No locking is done. This means sessions are prone to loss of data due to race
conditions of concurrent requests to the same session. The last session write
will win in this case. It might be useful when you implement your own logic to
deal with this like an optimistic approach.</p>


			</div>
		</div></td>
	</tr>
	<tr data-order="LOCK_ADVISORY" id="LOCK_ADVISORY">

		<td class="attributes"><code>integer</code></td>
		<td class="name"><code>
				<a href="source-class-Symfony.Component.HttpFoundation.Session.Storage.Handler.PdoSessionHandler.html#51-58" title="Go to source code"><b>LOCK_ADVISORY</b></a>
		</code></td>
		<td class="value"><code><span class="php-num">1</span></code></td>
		<td class="description"><div>
			<a href="#LOCK_ADVISORY" class="anchor">#</a>

			<div class="description short">
				
<p>Creates an application-level lock on a session. The disadvantage is that the
lock is not enforced by the database and thus other, unaware parts of the
application could still concurrently modify the session. The advantage is it
does not require a transaction. This mode is not available for SQLite and not
yet implemented for oci and sqlsrv.</p>

			</div>

			<div class="description detailed hidden">
				
<p>Creates an application-level lock on a session. The disadvantage is that the
lock is not enforced by the database and thus other, unaware parts of the
application could still concurrently modify the session. The advantage is it
does not require a transaction. This mode is not available for SQLite and not
yet implemented for oci and sqlsrv.</p>


			</div>
		</div></td>
	</tr>
	<tr data-order="LOCK_TRANSACTIONAL" id="LOCK_TRANSACTIONAL">

		<td class="attributes"><code>integer</code></td>
		<td class="name"><code>
				<a href="source-class-Symfony.Component.HttpFoundation.Session.Storage.Handler.PdoSessionHandler.html#60-66" title="Go to source code"><b>LOCK_TRANSACTIONAL</b></a>
		</code></td>
		<td class="value"><code><span class="php-num">2</span></code></td>
		<td class="description"><div>
			<a href="#LOCK_TRANSACTIONAL" class="anchor">#</a>

			<div class="description short">
				
<p>Issues a real row lock. Since it uses a transaction between opening and
closing a session, you have to be careful when you use same database connection
that you also use for your application logic. This mode is the default because
it's the only reliable solution across DBMSs.</p>

			</div>

			<div class="description detailed hidden">
				
<p>Issues a real row lock. Since it uses a transaction between opening and
closing a session, you have to be careful when you use same database connection
that you also use for your application logic. This mode is the default because
it's the only reliable solution across DBMSs.</p>


			</div>
		</div></td>
	</tr>
	</table>










</div>

	<div id="footer">
		Ratchet API documentation generated by <a href="http://apigen.org">ApiGen 2.8.0</a>
	</div>
</div>
</div>
</body>
</html>
